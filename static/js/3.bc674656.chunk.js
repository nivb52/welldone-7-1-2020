(this["webpackJsonpmy-locations"]=this["webpackJsonpmy-locations"]||[]).push([[3],{37:function(t,e,n){"use strict";n.r(e),function(t){var r=n(0),i=n(38),o=n.n(i),s=n(11),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var c=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116;function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case l:case p:case u:return t;default:return e}}case g:case d:case i:return e}}}function y(t){return v(t)===h}e.typeOf=v,e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=u,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Lazy=g,e.Memo=d,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===a||t===s||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===d||t.$$typeof===u||t.$$typeof===l||t.$$typeof===p)},e.isAsyncMode=function(t){return y(t)||v(t)===c},e.isConcurrentMode=y,e.isContextConsumer=function(t){return v(t)===l},e.isContextProvider=function(t){return v(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return v(t)===p},e.isFragment=function(t){return v(t)===o},e.isLazy=function(t){return v(t)===g},e.isMemo=function(t){return v(t)===d},e.isPortal=function(t){return v(t)===i},e.isProfiler=function(t){return v(t)===a},e.isStrictMode=function(t){return v(t)===s},e.isSuspense=function(t){return v(t)===f}}));u(c),u(l((function(t,e){})));l((function(t){t.exports=c}));var h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function d(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}})()&&Object.assign;function g(t,e,n,r,i){}g.resetWarningCache=function(){};Function.call.bind(Object.prototype.hasOwnProperty);function v(){}function y(){}y.resetWarningCache=v;var m=l((function(t){t.exports=function(){function t(t,e,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:y,resetWarningCache:v};return n.PropTypes=n,n}()})),b=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)_.call(n,r)&&(t[r]=n[r])}return t},_=Object.prototype.hasOwnProperty,x=l((function(t,e){!function(){var e={};t.exports=e,e.simpleFilter=function(t,n){return n.filter((function(n){return e.test(t,n)}))},e.test=function(t,n){return null!==e.match(t,n)},e.match=function(t,e,n){var r,i=0,o=[],s=e.length,a=0,u=0,l=(n=n||{}).pre||"",c=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<s;p++)r=e[p],h[p]===t[i]?(r=l+r+c,i+=1,u+=1+u):u=0,a+=u,o[o.length]=r;return i===t.length?(a=h===t?1/0:a,{rendered:o.join(""),score:a}):null},e.filter=function(t,n,r){return n&&0!==n.length?"string"!=typeof t?n:(r=r||{},n.reduce((function(n,i,o,s){var a=i;r.extract&&(a=r.extract(i));var u=e.match(t,a,r);return null!=u&&(n[n.length]={string:u.rendered,score:u.score,index:o,original:i}),n}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))):[]}}()})),w=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};w.prototype.show=function(){this.element.style.display="block"},w.prototype.hide=function(){this.element.style.display="none"},w.prototype.add=function(t){this.items.push(t)},w.prototype.clear=function(){this.items=[],this.active=0},w.prototype.isEmpty=function(){return!this.items.length},w.prototype.isVisible=function(){return"block"===this.element.style.display},w.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},w.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},w.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},w.prototype.move=function(t){this.active=t,this.draw()},w.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},w.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},w.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var M=w,E=function(t,e,n){return this.options=b({minLength:2,limit:5,filter:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new M(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};E.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},E.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},E.prototype.handleBlur=function(){this.list.selectingListItem||this.list.hide()},E.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},E.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},E.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},E.prototype.update=function(t){this.data=t,this.handleKeyUp()},E.prototype.clear=function(){this.data=[],this.list.clear()},E.prototype.normalize=function(t){return t.toLowerCase()},E.prototype.match=function(t,e){return t.indexOf(e)>-1},E.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},E.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?x.filter(this.query,this.data,e).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)))},E.prototype.getItemValue=function(t){return t},E.prototype.render=function(t,e){if(e)return e;for(var n=this.getItemValue(t.original?t.original:t),r=this.normalize(n),i=r.lastIndexOf(this.query);i>-1;){var o=i+this.query.length;n=n.slice(0,i)+"<strong>"+n.slice(i,o)+"</strong>"+n.slice(o),i=r.slice(0,i).lastIndexOf(this.query)}return n},E.prototype.renderError=function(t){this.list.drawError(t)};var O=E,j=l((function(t){window.Suggestions=t.exports=O})),L=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,P=/^0o[0-7]+$/i,S=parseInt,A="object"==typeof a&&a&&a.Object===Object&&a,T="object"==typeof self&&self&&self.Object===Object&&self,R=A||T||Function("return this")(),I=Object.prototype.toString,q=Math.max,F=Math.min,N=function(){return R.Date.now()};function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function B(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==I.call(t)}(t))return NaN;if(z(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=z(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(L,"");var n=C.test(t);return n||P.test(t)?S(t.slice(2),n?2:8):k.test(t)?NaN:+t}var $={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Z(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(t){this.body=e.body}this.links=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],r=e[2].split(";"),i=null,o=r.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(i||(i=n.value),t):(t[n.key]=n.value,t):t}),{});return i?{url:n,rel:i,params:o}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}}(this.headers.link)}Z.prototype.hasNextPage=function(){return!!this.links.next},Z.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var D=Z,G="https://api.mapbox.com",V="downloadProgress",U="uploadProgress",Q="error",K="response",H="HttpError",J="RequestAbortedError",W=function(t){var e,n=t.type||H;if(t.body)try{e=JSON.parse(t.body)}catch(n){e=t.body}else e=null;var r=t.message||null;r||("string"==typeof e?r=e:e&&"string"==typeof e.message?r=e.message:n===J&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e},Y={};function X(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}var tt=l((function(t,e){!function(n){var r=e,i=t&&t.exports==r&&t,o="object"==typeof a&&a;o.global!==o&&o.window!==o||(n=o);var s=function(t){this.message=t};(s.prototype=new Error).name="InvalidCharacterError";var u=function(t){throw new s(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,h={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,i,o=t.length%3,s="",a=-1,c=t.length-o;++a<c;)e=t.charCodeAt(a)<<16,n=t.charCodeAt(++a)<<8,r=t.charCodeAt(++a),s+=l.charAt((i=e+n+r)>>18&63)+l.charAt(i>>12&63)+l.charAt(i>>6&63)+l.charAt(63&i);return 2==o?(e=t.charCodeAt(a)<<8,n=t.charCodeAt(++a),s+=l.charAt((i=e+n)>>10)+l.charAt(i>>4&63)+l.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(a),s+=l.charAt(i>>2)+l.charAt(i<<4&63)+"=="),s},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",s=-1;++s<e;)r=l.indexOf(t.charAt(s)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=h;else for(var p in h)h.hasOwnProperty(p)&&(r[p]=h[p]);else n.base64=h}(a)})),et={};function nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var rt=function(t){if(et[t])return et[t];var e=t.split("."),n=e[0],r=e[1];if(!r)throw new Error("Invalid token");var i=function(t){try{return JSON.parse(tt.decode(t))}catch(t){throw new Error("Invalid token")}}(r),o={usage:n,user:i.u};return nt(i,"a")&&(o.authorization=i.a),nt(i,"exp")&&(o.expires=1e3*i.exp),nt(i,"iat")&&(o.created=1e3*i.iat),nt(i,"scopes")&&(o.scopes=i.scopes),nt(i,"client")&&(o.client=i.client),nt(i,"ll")&&(o.lastLogin=i.ll),nt(i,"iu")&&(o.impersonator=i.iu),et[t]=o,o},it=l((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=this._events[n?n+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,i=e.length,o=new Array(i);r<i;r++)o[r]=e[r].fn;return o},a.prototype.listenerCount=function(t){var e=this._events[n?n+t:t];return e?e.fn?1:e.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var u,l,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,s),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(p=1,u=new Array(h-1);p<h;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==e||i&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?this._events[e=n?n+t:t]&&s(this,e):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}));function ot(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function st(t,e,n){if(!1===n||null===n)return t;var r=/\?/.test(t)?"&":"?",i=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(i+="="+ot(n)),""+t+r+i}var at={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(t){return!!t})).join(",")),n=st(n,t,r))})),n},appendQueryParam:st,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,n){var r=e[n];if(void 0===r)throw new Error("Unspecified route parameter "+n);return"/"+ot(r)})):t}},ut=1;function lt(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var r=b(n,e.headers),i=Object.keys(r).reduce((function(t,e){return t[e.toLowerCase()]=r[e],t}),{});this.id=ut++,this._options=e,this.emitter=new it,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.headers=i}lt.prototype.url=function(t){var e=at.prependOrigin(this.path,this.origin);e=at.appendQueryObject(e,this.query);var n=this.params;if(t){e=at.appendQueryParam(e,"access_token",t);var r=rt(t).user;n=b({ownerId:r},n)}return at.interpolateRouteParams(e,n)},lt.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(K,e),e}),(function(e){throw t.error=e,t.emitter.emit(Q,e),e}))},lt.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},lt.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,i(t))}))}function r(e){t(e,null,(function(){}))}function i(t){t.send().then(n,r)}i(this)},lt.prototype.clone=function(){return this._extend()},lt.prototype._extend=function(t){var e=b(this._options,t);return new lt(this.client,e)};var ct=lt;function ht(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");rt(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||G}ht.prototype.createRequest=function(t){return new ct(this,t)};var pt=ht;function ft(t){pt.call(this,t)}(ft.prototype=Object.create(pt.prototype)).constructor=ft,ft.prototype.sendRequest=function(t){return Promise.resolve().then((function(){var e=function(t,e){var n=t.url(e),r=new window.XMLHttpRequest;return r.open(t.method,n),Object.keys(t.headers).forEach((function(e){r.setRequestHeader(e,t.headers[e])})),r}(t,t.client.accessToken);return function(t,e){return new Promise((function(n,r){e.onprogress=function(e){t.emitter.emit(V,X(e))};var i=t.file;i&&(e.upload.onprogress=function(e){t.emitter.emit(U,X(e))}),e.onerror=function(t){r(t)},e.onabort=function(){var e=new W({request:t,type:J});r(e)},e.onload=function(){if(delete Y[t.id],e.status<200||e.status>=400){var i=new W({request:t,body:e.response,statusCode:e.status});r(i)}else n(e)};var o=t.body;"string"==typeof o?e.send(o):o?e.send(JSON.stringify(o)):i?e.send(i):e.send(),Y[t.id]=e})).then((function(e){return function(t,e){return new D(t,{body:e.response,headers:(n=e.getAllResponseHeaders(),r={},n?(n.trim().split(/[\r|\n]+/).forEach((function(t){var e=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);r[e.name]=e.value})),r):r),statusCode:e.status});var n,r}(t,e)}))}(t,e)}))},ft.prototype.abortRequest=function(t){var e=Y[t.id];e&&(e.abort(),delete Y[t.id])};var dt=function(t){return new ft(t)},gt=dt,vt=Object.prototype.toString,yt={};function mt(t){var e=Array.isArray(t);return function(n){var r=bt(yt.plainArray,n);if(r)return r;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var i=0;i<n.length;i++)if(r=bt(e?t[i]:t,n[i]))return[i].concat(r)}}function bt(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function _t(t,e){var n=t.length,r=t[n-1],i=t.slice(0,n-1);return 0===i.length&&(i=["value"]),e=b(e,{path:i}),"function"==typeof r?r(e):wt(e,function(t){return"must be "+(/^an? /.test(e=t)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e)+".";var e}(r))}function xt(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function wt(t,e){return(Mt(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function Mt(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}yt.assert=function(t,e){return e=e||{},function(n){var r=bt(t,n);if(r){var i=_t(r,e);throw e.apiName&&(i=e.apiName+": "+i),new Error(i)}}},yt.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,r=bt(yt.plainObject,t);if(r)return r;for(var i=[],o=0;o<n.length;o++)(r=bt(n[o].value,t[e=n[o].key]))&&i.push([e].concat(r));return i.length<2?i[0]:function(t){i=i.map((function(e){return"- "+e[0]+": "+_t(e,t).split("\n").join("\n  ")}));var e=t.path.join(".");return"The following properties"+("value"===e?"":" of "+e)+" have invalid values:\n  "+i.join("\n  ")}}},yt.strictShape=function(t){var e=yt.shape(t);return function(n){var r=e(n);if(r)return r;var i=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},yt.arrayOf=function(t){return mt(t)},yt.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return mt(t)},yt.required=function(t){function e(e){return null==e?function(t){return wt(t,Mt(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},yt.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return bt(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?xt(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},yt.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},yt.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return yt.equal(t)}));return yt.oneOfType.apply(this,e)},yt.range=function(t){var e=t[0],n=t[1];return function(t){if(bt(yt.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},yt.any=function(){},yt.boolean=function(t){if("boolean"!=typeof t)return"boolean"},yt.number=function(t){if("number"!=typeof t)return"number"},yt.plainArray=function(t){if(!Array.isArray(t))return"array"},yt.plainObject=function(t){if("[object Object]"!==vt.call(e=t)||null!==(n=Object.getPrototypeOf(e))&&n!==Object.getPrototypeOf({}))return"object";var e,n},yt.string=function(t){if("string"!=typeof t)return"string"},yt.func=function(t){if("function"!=typeof t)return"function"},yt.validate=bt,yt.processMessage=_t;var Et=yt,Ot=b(Et,{file:function(t){if("undefined"!=typeof window){if(t instanceof a.Blob||t instanceof a.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(t){return"date"}},coordinates:function(t){return Et.tuple(Et.number,Et.number)(t)},assertShape:function(t,e){return Et.assert(Et.strictShape(t),e)}}),jt=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})},Lt=function(t){return function(t,e){return Object.keys(t).reduce((function(e,n){return e[n]="boolean"==typeof(r=t[n])?JSON.stringify(r):r,e;var r}),{})}(t)},kt={},Ct=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];kt.forwardGeocode=function(t){Ot.assertShape({query:Ot.required(Ot.string),mode:Ot.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ot.arrayOf(Ot.string),proximity:Ot.coordinates,types:Ot.arrayOf(Ot.oneOf(Ct)),autocomplete:Ot.boolean,bbox:Ot.arrayOf(Ot.number),limit:Ot.number,language:Ot.arrayOf(Ot.string)})(t),t.mode=t.mode||"mapbox.places";var e=Lt(b({country:t.countries},jt(t,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:jt(t,["mode","query"]),query:e})},kt.reverseGeocode=function(t){Ot.assertShape({query:Ot.required(Ot.coordinates),mode:Ot.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ot.arrayOf(Ot.string),types:Ot.arrayOf(Ot.oneOf(Ct)),bbox:Ot.arrayOf(Ot.number),limit:Ot.number,language:Ot.arrayOf(Ot.string),reverseMode:Ot.oneOf("distance","score")})(t),t.mode=t.mode||"mapbox.places";var e=Lt(b({country:t.countries},jt(t,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:jt(t,["mode","query"]),query:e})};var Pt,St=(Pt=kt,function(t){var e;e=pt.prototype.isPrototypeOf(t)?t:dt(t);var n=Object.create(Pt);return n.client=e,n});var At=self.crypto||self.msCrypto;function Tt(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}Tt.prototype={select:function(t,e){var n=this.getSelectedIndex(t,e),r=this.getEventPayload("search.select",e);if(r.resultIndex=n,r.resultPlaceName=t.place_name,r.resultId=t.id,(n!==this.lastSentIndex||r.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,r.queryString))return this.push(r)},start:function(t){var e=this.getEventPayload("search.start",t);if(e.queryString)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=t.key,n.queryString)return this.push(n)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(t);this.request(n,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var n;n=e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:null;var r=e._map?e._map.getZoom():null,i={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:e.options.limit,mapZoom:r,keyboardLocale:this.locale};return i.queryString="search.select"===t?e.inputString:"search.select"!=t&&e._inputEl?e._inputEl.value:e.inputString,i},request:function(t,e){var n=new XMLHttpRequest;for(var r in n.onreadystatechange=function(){if(4==this.readyState)return e(204==this.status?null:this.statusText)},n.open(t.method,t.host+"/"+t.path,!0),t.headers)n.setRequestHeader(r,t.headers[r]);n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return function(t){t=t||21;for(var e="",n=At.getRandomValues(new Uint8Array(t));0<t--;)e+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&n[t]];return e}()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var n=t.id;return e._typeahead.data.map((function(t){return t.id})).indexOf(n)}},shouldEnableLogging:function(t){return!(!1===t.enableEventLogging||t.origin&&-1==t.origin.indexOf("api.mapbox.com")||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var Rt=Tt,It={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje"}},qt=l((function(t){!function(e,n,r){t.exports?t.exports=r():e.subtag=r()}(a,0,(function(){var t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function e(e){return e.match(t)||[]}function n(t){return{language:(t=e(t))[1]||"",extlang:t[2]||"",script:t[3]||"",region:t[4]||""}}function r(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function i(t,i,o){function s(n){return e(n)[t]||""}r(s,"pattern",i),r(n,o,s)}return i(1,/^[a-zA-Z]{2,3}$/,"language"),i(2,/^[a-zA-Z]{3}$/,"extlang"),i(3,/^[a-zA-Z]{4}$/,"script"),i(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(n,"split",(function(t){return e(t).filter((function(t,e){return t&&e}))})),n}))})),Ft=o.a.EventEmitter;function Nt(t){this._eventEmitter=new Ft,this.options=b({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null}Nt.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},onAdd:function(t){this._map=t,this.setLanguage(),this.geocoderService=St(gt({accessToken:this.options.accessToken,origin:this.options.origin})),this.eventManager=new Rt(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",function(t,e,n){var r,i,o,s,a,u,l=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n)}function d(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function g(){var t=N();if(d(t))return v(t);a=setTimeout(g,function(t){var n=e-(t-u);return h?F(n,o-(t-l)):n}(t))}function v(t){return a=void 0,p&&r?f(t):(r=i=void 0,s)}function y(){var t=N(),n=d(t);if(r=arguments,i=this,u=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(g,e),c?f(t):s}(u);if(h)return a=setTimeout(g,e),f(u)}return void 0===a&&(a=setTimeout(g,e)),s}return e=B(e)||0,z(void 0)&&(c=!!(void 0).leading,o=(h="maxWait"in void 0)?q(B((void 0).maxWait)||0,e):o,p="trailing"in void 0?!!(void 0).trailing:p),y.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=i=a=void 0},y.flush=function(){return void 0===a?s:v(N())},y}(this._onKeyDown,200)),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var i=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(i),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(r),this._typeahead=new j(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1),e},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var r=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!r||!r.value)return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._clearEl.style.display="none";t.metaKey||-1!==[n,e,37,39,13,38,40].indexOf(t.keyCode)||r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;if(t&&t.id!==this.lastSelected){var e;if(this._clearEl.style.display="none",this.options.flyTo)if(t.properties&&!$[t.properties.short_code]&&t.bbox){var n=t.bbox;e=b({},this.options.flyTo),this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else t.properties&&$[t.properties.short_code]?(e=b({},this.options.flyTo),this._map.fitBounds($[t.properties.short_code].bbox,e)):((e=b({},{zoom:this.options.zoom},this.options.flyTo)).center=t.center,this._map.flyTo(e));this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this),this.lastSelected=t.id}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var e,n=this,r=["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((function(t,e){return n.options[e]&&(t[e]=["countries","types","language"].indexOf(e)>-1?n.options[e].split(/[\s,]+/):n.options[e],"proximity"===e&&n.options[e]&&n.options[e].longitude&&n.options[e].latitude&&(t[e]=[n.options[e].longitude,n.options[e].latitude])),t}),{});if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var i=t.split(/[\s(,)?]+/).map((function(t){return parseFloat(t,10)})).reverse();r=b(r,{query:i,limit:1}),e=this.geocoderService.reverseGeocode(r).send()}else r=b(r,{query:t}),e=this.geocoderService.forwardGeocode(r).send();var o=[];return this.options.localGeocoder&&((o=this.options.localGeocoder(t))||(o=[])),e.then(function(t){this._loadingEl.style.display="none";var e={};"200"==t.statusCode&&(e=t.body),e.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),e.features=e.features?o.concat(e.features):o,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?(this._clearEl.style.display="block",this._eventEmitter.emit("results",e),this._typeahead.update(e.features)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",e))}.bind(this)),e.catch(function(t){this._loadingEl.style.display="none",o.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(o)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:t})}.bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=qt.language(t),n=It.placeholder[e];if(n)return n}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},_handleMarker:function(t){this._removeMarker();var e=b({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),this.mapMarker.setLngLat(t.center).addTo(this._map),this},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}};var zt=Nt;function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zt(t,e,n){return e&&$t(t.prototype,e),n&&$t(t,n),t}function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"===Dt(Symbol.iterator)?function(t){return Dt(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Dt(t)})(t)}function Vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ht,Jt=1e-6,Wt="undefined"!=typeof Float32Array?Float32Array:Array;function Yt(t,e){var n=function(t,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r[0]*i+r[4]*o+r[8]*s+r[12]*a,t[1]=r[1]*i+r[5]*o+r[9]*s+r[13]*a,t[2]=r[2]*i+r[6]*o+r[10]*s+r[14]*a,t[3]=r[3]*i+r[7]*o+r[11]*s+r[15]*a,t}([],0,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function Xt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],g=e[12],v=e[13],y=e[14],m=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*a+x*h+w*g,t[1]=b*i+_*u+x*p+w*v,t[2]=b*o+_*l+x*f+w*y,t[3]=b*s+_*c+x*d+w*m,t[4]=(b=n[4])*r+(_=n[5])*a+(x=n[6])*h+(w=n[7])*g,t[5]=b*i+_*u+x*p+w*v,t[6]=b*o+_*l+x*f+w*y,t[7]=b*s+_*c+x*d+w*m,t[8]=(b=n[8])*r+(_=n[9])*a+(x=n[10])*h+(w=n[11])*g,t[9]=b*i+_*u+x*p+w*v,t[10]=b*o+_*l+x*f+w*y,t[11]=b*s+_*c+x*d+w*m,t[12]=(b=n[12])*r+(_=n[13])*a+(x=n[14])*h+(w=n[15])*g,t[13]=b*i+_*u+x*p+w*v,t[14]=b*o+_*l+x*f+w*y,t[15]=b*s+_*c+x*d+w*m,t}function te(t,e,n){var r,i,o,s,a,u,l,c,h,p,f,d,g=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*v+e[8]*y+e[12],t[13]=e[1]*g+e[5]*v+e[9]*y+e[13],t[14]=e[2]*g+e[6]*v+e[10]*y+e[14],t[15]=e[3]*g+e[7]*v+e[11]*y+e[15]):(i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*g+a*v+h*y+e[12],t[13]=i*g+u*v+p*y+e[13],t[14]=o*g+l*v+f*y+e[14],t[15]=s*g+c*v+d*y+e[15]),t}function ee(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ne(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],g=t[13],v=t[14],y=t[15],m=e[0],b=e[1],_=e[2],x=e[3],w=e[4],M=e[5],E=e[6],O=e[7],j=e[8],L=e[9],k=e[10],C=e[11],P=e[12],S=e[13],A=e[14],T=e[15];return Math.abs(n-m)<=Jt*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-b)<=Jt*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=Jt*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-x)<=Jt*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-w)<=Jt*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(a-M)<=Jt*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-E)<=Jt*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(l-O)<=Jt*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-j)<=Jt*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(h-L)<=Jt*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(p-k)<=Jt*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(f-C)<=Jt*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-P)<=Jt*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(g-S)<=Jt*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(v-A)<=Jt*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(y-T)<=Jt*Math.max(1,Math.abs(y),Math.abs(T))}function re(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ie(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}Ht=new Wt(4),Wt!=Float32Array&&(Ht[0]=0,Ht[1]=0,Ht[2]=0,Ht[3]=0),function(){var t=new Wt(2);Wt!=Float32Array&&(t[0]=0,t[1]=0)}(),function(){var t=new Wt(3);Wt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0)}();var oe=Math.PI,se=oe/4,ae=oe/180,ue=180/oe,le=4003e4;function ce(t){return Math.pow(2,t)}function he(t,e){var n=Kt(t,2),r=n[0],i=n[1];return ie(Number.isFinite(r)&&Number.isFinite(e)),ie(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),[(e*=512)*(r*ae+oe)/(2*oe),e*(oe-Math.log(Math.tan(se+i*ae*.5)))/(2*oe)]}function pe(t,e){var n=Kt(t,2),r=n[0]/(e*=512)*(2*oe)-oe,i=2*(Math.atan(Math.exp(oe-n[1]/e*(2*oe)))-se);return[r*ue,i*ue]}function fe(t,e){var n=Kt(t,3),r=n[0],i=n[1],o=n[2],s=void 0===o?0:o;return ie(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(s)),Yt(e,[r,i,s,1])}function de(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Kt(t,3),i=r[0],o=r[1],s=r[2];if(ie(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(s))return Yt(e,[i,o,s,1]);var a=Yt(e,[i,o,0,1]),u=Yt(e,[i,o,1,1]),l=a[2],c=u[2];return function(t,e,n,r){var i=a[0],o=a[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}([],0,u,l===c?0:((n||0)-l)/(c-l))}var ge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ve=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?ge:i,s=e.projectionMatrix,a=void 0===s?ge:s;Bt(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=a;var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Xt(u,u,this.projectionMatrix),Xt(u,u,this.viewMatrix),this.viewProjectionMatrix=u;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ee(l,l,[this.width/2,-this.height/2,1]),te(l,l,[1,-1,0]),Xt(l,l,this.viewProjectionMatrix);var c=function(t,e){var n=l[0],r=l[1],i=l[2],o=l[3],s=l[4],a=l[5],u=l[6],c=l[7],h=l[8],p=l[9],f=l[10],d=l[11],g=l[12],v=l[13],y=l[14],m=l[15],b=n*a-r*s,_=n*u-i*s,x=n*c-o*s,w=r*u-i*a,M=r*c-o*a,E=i*c-o*u,O=h*v-p*g,j=h*y-f*g,L=h*m-d*g,k=p*y-f*v,C=p*m-d*v,P=f*m-d*y,S=b*P-_*C+x*k+w*L-M*j+E*O;return S?(t[0]=(a*P-u*C+c*k)*(S=1/S),t[1]=(i*C-r*P-o*k)*S,t[2]=(v*E-y*M+m*w)*S,t[3]=(f*M-p*E-d*w)*S,t[4]=(u*L-s*P-c*j)*S,t[5]=(n*P-i*L+o*j)*S,t[6]=(y*x-g*E-m*_)*S,t[7]=(h*E-f*x+d*_)*S,t[8]=(s*C-a*L+c*O)*S,t[9]=(r*L-n*C-o*O)*S,t[10]=(g*M-v*x+m*b)*S,t[11]=(p*x-h*M-d*b)*S,t[12]=(a*j-s*k-u*O)*S,t[13]=(n*k-r*j+i*O)*S,t[14]=(v*_-g*w-y*b)*S,t[15]=(h*w-p*_+f*b)*S,t):null}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!c)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=l,this.pixelUnprojectionMatrix=c,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Zt(t,[{key:"equals",value:function(e){return e instanceof t&&e.width===this.width&&e.height===this.height&&ne(e.projectionMatrix,this.projectionMatrix)&&ne(e.viewMatrix,this.viewMatrix)}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),o=fe(i,this.pixelProjectionMatrix),s=Kt(o,2),a=s[0],u=s[1],l=r?u:this.height-u;return 2===t.length?[a,l]:[a,l,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=Kt(t,3),s=o[0],a=o[1],u=o[2],l=r?a:this.height-a,c=i&&i*this.pixelsPerMeter,h=de([s,l,u],this.pixelUnprojectionMatrix,c),p=this.unprojectPosition(h),f=Kt(p,3),d=f[0],g=f[1],v=f[2];return Number.isFinite(u)?[d,g,v]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectPosition",value:function(t){var e=Kt(this.projectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=Kt(this.unprojectFlat(t),2);return[e[0],e[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){return t}},{key:"unprojectFlat",value:function(t){return t}}]),t}();function ye(t){var e=t.width,n=t.height,r=t.padding,i=void 0===r?0:r,o=t.offset,s=void 0===o?[0,0]:o,a=Kt(t.bounds,2),u=Kt(a[0],2),l=u[0],c=u[1],h=Kt(a[1],2),p=h[0],f=h[1];Number.isFinite(i)?i={top:i,bottom:i,left:i,right:i}:ie(Number.isFinite(i.top)&&Number.isFinite(i.bottom)&&Number.isFinite(i.left)&&Number.isFinite(i.right));var d=new me({width:e,height:n,longitude:0,latitude:0,zoom:0}),g=d.project([l,f]),v=d.project([p,c]),y=[Math.abs(v[0]-g[0]),Math.abs(v[1]-g[1])],m=[e-i.left-i.right-2*Math.abs(s[0]),n-i.top-i.bottom-2*Math.abs(s[1])];ie(m[0]>0&&m[1]>0);var b=m[0]/y[0],_=m[1]/y[1],x=d.unproject([(v[0]+g[0])/2+(i.right-i.left)/2/b,(v[1]+g[1])/2+(i.bottom-i.top)/2/_]),w=d.zoom+Math.log2(Math.abs(Math.min(b,_)));return{longitude:x[0],latitude:x[1],zoom:w}}var me=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,s=void 0===o?0:o,a=n.longitude,u=void 0===a?0:a,l=n.zoom,c=void 0===l?0:l,h=n.pitch,p=void 0===h?0:h,f=n.bearing,d=void 0===f?0:f,g=n.altitude,v=void 0===g?1.5:g,y=n.nearZMultiplier,m=n.farZMultiplier;Bt(this,e),r=r||1,i=i||1;var b=ce(c);v=Math.max(.75,v);var _=he([u,s],b);_[2]=0;var x,w,M=function(t,e,n,r,i){var o,s=1/Math.tan(w.fov/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&1/0!==i?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}([],0,(w=function(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?1.5:r,o=t.pitch,s=t.nearZMultiplier,a=void 0===s?1:s,u=t.farZMultiplier,l=void 0===u?1:u,c=(void 0===o?0:o)*ae,h=Math.atan(.5/i),p=Math.sin(h)*i/Math.sin(Math.PI/2-c-h),f=Math.cos(Math.PI/2-c)*p+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:a,far:f*l}}({width:(x={width:r,height:i,pitch:p,bearing:d,altitude:v,nearZMultiplier:y||1/i,farZMultiplier:m||1.01}).width,height:x.height,altitude:x.altitude,pitch:x.pitch,nearZMultiplier:x.nearZMultiplier,farZMultiplier:x.farZMultiplier})).aspect,w.near,w.far),E=function(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.center,o=void 0===i?null:i,s=t.flipY,a=void 0!==s&&s,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return te(u,u,[0,0,-t.altitude]),ee(u,u,[1,1,1/e]),function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+c*r,t[6]=a*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-s*r,t[10]=h*i-a*r,t[11]=p*i-u*r}(u,u,-n*ae),function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+c*r,t[2]=a*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-s*r,t[6]=h*i-a*r,t[7]=p*i-u*r}(u,u,r*ae),a&&ee(u,u,[1,-1,1]),o&&te(u,u,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),u}({height:i,center:_,pitch:p,bearing:d,altitude:v,flipY:!0});return(t=function(t,e){return!e||"object"!==Gt(e)&&"function"!=typeof e?Vt(t):e}(this,Ut(e).call(this,{width:r,height:i,viewMatrix:E,projectionMatrix:M}))).latitude=s,t.longitude=u,t.zoom=c,t.pitch=p,t.bearing=d,t.altitude=v,t.scale=b,t.center=_,t.pixelsPerMeter=function(t){var e=t.latitude,n=t.longitude,r=t.scale,i=t.highPrecision,o=void 0!==i&&i;r=void 0!==r?r:ce(t.zoom),ie(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(r));var s={},a=512*r,u=Math.cos(e*ae),l=a/360,c=l/u,h=a/le/u;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[l,-c,h],s.degreesPerPixel=[1/l,-1/c,1/h],o){var p=ae*Math.tan(e*ae)/u,f=a/le*p,d=f/c*h;s.pixelsPerDegree2=[0,-l*p/2,f],s.pixelsPerMeter2=[d,0,d]}return s}(Vt(Vt(t))).pixelsPerMeter[2],Object.freeze(Vt(Vt(t))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,ve),Zt(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return he(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return pe(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=de(t.pos,this.pixelUnprojectionMatrix),r=re([],he(e,this.scale),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n));return pe(re([],this.center,r),this.scale)}},{key:"getLocationAtPoint",value:function(t){return this.getMapCenterByLngLatPosition({lngLat:t.lngLat,pos:t.pos})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=ye(Object.assign({width:r,height:i,bounds:t},n)),s=o.longitude,a=o.latitude,u=o.zoom;return new e({width:r,height:i,longitude:s,latitude:a,zoom:u})}}]),e}(),be=["top-left","top-right","bottom-left","bottom-right"],_e=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).geocoder=null,e.cachedResult=null,e.initializeGeocoder=function(){var t=e.getMapboxMap(),n=e.getContainerNode(),r=e.props,i=r.inputValue,o=r.render,s=r.getItemValue,a=r.onInit,u=r.position,l={accessToken:r.mapboxApiAccessToken,origin:r.origin,zoom:r.zoom,flyTo:!1,placeholder:r.placeholder,proximity:r.proximity,trackProximity:r.trackProximity,collapsed:r.collapsed,clearAndBlurOnEsc:r.clearAndBlurOnEsc,clearOnBlur:r.clearOnBlur,bbox:r.bbox,types:r.types,countries:r.countries,minLength:r.minLength,limit:r.limit,language:r.language,filter:r.filter,localGeocoder:r.localGeocoder,reverseGeocode:r.reverseGeocode,enableEventLogging:r.enableEventLogging,marker:!1};o&&"function"==typeof o&&(l.render=o),s&&"function"==typeof s&&(l.getItemValue=s),e.geocoder=new zt(l),e.subscribeEvents(),n?n.appendChild(e.geocoder.onAdd(t)):t.addControl(e.geocoder,be.find((function(t){return u===t}))),null!=i?e.geocoder.setInput(i):e.cachedResult&&e.geocoder.setInput(e.cachedResult.place_name),(e.cachedResult||null!=i)&&e.showClearIcon(),a(e.geocoder)},e.showClearIcon=function(){e.geocoder._clearEl.style.display="block"},e.getMapboxMap=function(){var t=e.props.mapRef;return t&&t.current&&t.current.getMap()||null},e.getContainerNode=function(){var t=e.props.containerRef;return t&&t.current||null},e.subscribeEvents=function(){e.geocoder.on("clear",e.handleClear),e.geocoder.on("loading",e.handleLoading),e.geocoder.on("results",e.handleResults),e.geocoder.on("result",e.handleResult),e.geocoder.on("error",e.handleError)},e.unsubscribeEvents=function(){e.geocoder.off("clear",e.handleClear),e.geocoder.off("loading",e.handleLoading),e.geocoder.off("results",e.handleResults),e.geocoder.off("result",e.handleResult),e.geocoder.off("error",e.handleError)},e.removeGeocoder=function(){var t=e.getMapboxMap();e.unsubscribeEvents(),t&&t.removeControl&&e.getMapboxMap().removeControl(e.geocoder),e.geocoder=null},e.handleClear=function(){e.cachedResult=null,e.props.onClear()},e.handleLoading=function(t){e.props.onLoading(t)},e.handleResults=function(t){e.props.onResults(t)},e.handleResult=function(t){var n=t.result,r=e.props,i=r.onViewportChange,o=r.onResult,a=n.bbox,u=n.center,l=n.properties,c=(void 0===l?{}:l).short_code,h=u[0],p=u[1],f={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},d=e.getMapboxMap().getContainer().getBoundingClientRect(),g=d.width,v=d.height,y=e.geocoder.options.zoom,m=function(t,e){return new me(e).fitBounds(t)};try{!f[c]&&a?y=m([[a[0],a[1]],[a[2],a[3]]],{width:g,height:v}).zoom:f[c]&&(y=m(f[c].bbox,{width:g,height:v}).zoom)}catch(t){console.warn("following result caused an error when trying to zoom to bbox: ",n),y=e.geocoder.options.zoom}i({longitude:h,latitude:p,zoom:y,transitionInterpolator:new s.FlyToInterpolator,transitionDuration:3e3}),o(t),e.cachedResult=n,e.geocoder._typeahead.selected=null,e.showClearIcon()},e.handleError=function(t){e.props.onError(t)},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.initializeGeocoder()},i.componentWillUnmount=function(){this.removeGeocoder()},i.componentDidUpdate=function(){this.removeGeocoder(),this.initializeGeocoder()},i.getGeocoder=function(){return this.geocoder},i.render=function(){return null},r}(r.PureComponent);_e.propTypes={mapRef:m.object.isRequired,containerRef:m.object,onViewportChange:m.func,mapboxApiAccessToken:m.string.isRequired,inputValue:m.string,origin:m.string,zoom:m.number,placeholder:m.string,proximity:m.object,trackProximity:m.bool,collapsed:m.bool,clearAndBlurOnEsc:m.bool,clearOnBlur:m.bool,bbox:m.array,types:m.string,countries:m.string,minLength:m.number,limit:m.number,language:m.string,filter:m.func,localGeocoder:m.func,reverseGeocode:m.bool,enableEventLogging:m.bool,render:m.func,getItemValue:m.func,position:m.oneOf(be),onInit:m.func,onClear:m.func,onLoading:m.func,onResults:m.func,onResult:m.func,onError:m.func},_e.defaultProps={onViewportChange:function(){},origin:"https://api.mapbox.com",zoom:16,placeholder:"Search",trackProximity:!1,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,minLength:2,limit:5,reverseGeocode:!1,enableEventLogging:!0,position:"top-right",onInit:function(){},onClear:function(){},onLoading:function(){},onResults:function(){},onResult:function(){},onError:function(){}},e.default=_e}.call(this,n(14))},38:function(t,e,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,s,a;if("function"!==typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"===typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"===typeof u)o(u,this,e);else{var l=u.length,c=g(u,l);for(n=0;n<l;++n)o(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}}}]);
//# sourceMappingURL=3.bc674656.chunk.js.map