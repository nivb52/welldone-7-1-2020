(this["webpackJsonpmy-locations"]=this["webpackJsonpmy-locations"]||[]).push([[0],{16:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(5),c=(a(27),a(28),a(29),a(0)),o=a.n(c),i=a(11),s=o.a.lazy((function(){return Promise.resolve().then(a.bind(null,11))})),l=o.a.lazy((function(){return a.e(3).then(a.bind(null,37))})),u=a(33).mapbox,d=function(e){return e&&"function"===typeof e},f={float:"left",margin:"50px",padding:"10px"};t.default=function(e){var t=e.coords,a=e.editCoords,m=void 0===a?null:a,b=e.editAddressByGeocoder,v=void 0===b?null:b,p=e.isEditable,g=void 0!==p&&p,h=t&&t[0]?t[0]:0,y=t&&t[1]?t[1]:0,E=Object(c.useState)({width:"70vw",height:"60vh",longitude:h,latitude:y,zoom:5}),O=Object(r.a)(E,2),j=O[0],k=O[1],C=o.a.useRef();return o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(i.default,Object.assign({},j,{ref:C,mapboxApiAccessToken:u,mapStyle:"mapbox://styles/mapbox/outdoors-v9",onViewportChange:function(e){g&&(k(Object(n.a)({},e,{transitionDuration:3e3})),d(m)&&m(e))}}),o.a.createElement(i.Marker,{latitude:y,longitude:h,offsetLeft:-20,offsetTop:-10},o.a.createElement("div",null,"\ud83d\udc47")),g&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(s,{style:f,positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,mapboxApiAccessToken:u}),o.a.createElement(l,{mapboxApiAccessToken:u,mapRef:C,onResult:function(e){var t=e.result,a=t.geometry.coordinates,c=Object(r.a)(a,2),o=c[0],i=c[1];k(Object(n.a)({},j,{longitude:o,latitude:i,transitionDuration:3e3})),d(m)&&m(j),d(v)&&v(t)},position:"top-right"})))),!g&&o.a.createElement("div",{className:"mapbox sidebar-ovelay"},o.a.createElement("figcaption",null,"Longitude: ",j.longitude," | Latitude: ",j.latitude)))}},21:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},33:function(e){e.exports=JSON.parse('{"mapbox":"pk.eyJ1Ijoibml2YjUyIiwiYSI6ImNrNTcyeWhrYzA5bXEzbXBnbDU3dzZ5MzkifQ.h9eMjMa17c4nMDzT3GrGvw"}')},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=(a(16),a(5)),s=a(6),l=a.n(s),u=a(1),d=a(8),f=function(e){var t=e.children,a=e.id,n=e.back,c=e.view,o=e.edit,i=e.onEdit,s=e.del,l=e.add,u=function(e,t){switch(e){case"back":n();break;case"view":c(t);break;case"edit":o(t);break;case"del":s(t);break;case"add":l();break;default:return}};return r.a.createElement("div",{className:"toolbar"},r.a.createElement("h1",null,t),!i&&!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return u("add")},className:"btn"},"new")),i&&!a&&r.a.createElement("button",{onClick:function(){return u("back")},className:"btn"},"back"),a&&r.a.createElement("div",{className:"toolbar-btn"},r.a.createElement("button",{onClick:function(){return u("back")},className:"btn"},"back"),r.a.createElement("button",{onClick:function(){return u("view",a)},className:"btn btn-info"},"view"),r.a.createElement("button",{onClick:function(){return u("edit",a)},className:"btn btn-success"},"edit"),r.a.createElement("button",{onClick:function(){return u("del",a)},className:"btn btn-danger"},"delete")))};function m(e){var t=e.list,a=e.handleClick,n=e.parentClass,c=void 0===n?"card":n,o=e.nameClass,i=void 0===o?"card-name":o,s=e.classCondition,l=void 0===s?function(){}:s,u=e.itemClass,d=void 0===u?"":u;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",{className:c+" "+l(e),key:e._id,onClick:function(){return a(e)}},r.a.createElement("div",{className:i},r.a.createElement("span",{className:d},e.name)))})))}function b(e){var t=e.label,a=void 0===t?"name":t,c=e.objectKey,o=void 0===c?"":c,s=e.placeholder,l=void 0===s?"enter here":s,u=e.onEnter,d=e.handleInput,f=e.handleBlur,m=e.classInput,b=void 0===m?"":m,v=e.defaultValue,p=void 0===v?"":v,g=Object(n.useState)(p),h=Object(i.a)(g,2),y=h[0],E=h[1],O=Object(n.useState)(!0),j=Object(i.a)(O,2),k=j[0],C=j[1],w=o||a;return r.a.createElement("div",{className:"block"},r.a.createElement("label",{className:"block"},a),r.a.createElement("input",{className:b,onKeyDown:function(e){if(13===e.keyCode)return u()},placeholder:l,onChange:function(e){var t=e.target.value;if(!t||!t.trim())return C(!1);C(!0),E(t),d(w,y)},onBlur:function(){return f(w,y)}}),k?"\u2705":"\u274c")}var v=a(19),p=(a(34),function(e){var t=e.cards,a=e.deleteCard,c=e.editOrAddCards,o=e.title,s=void 0===o?"Global Cards":o,l=e.inputs,p=void 0===l?["name"]:l,g=e.editInputs,h=void 0===g?["name"]:g,y=e.classInput,E=void 0===y?"mr-bottom-1rem":y,O=e.doOnSelect,j=void 0===O?function(){}:O,k=e.showMap,C=e.children,w=function(e){var a=t.find((function(t){return t._id===e}));return a=-1===a?null:a},x=function(){c(K),J()},S=function(e,t){T(Object(d.a)({},K,Object(u.a)({},e,t)))},N=function(e,t){T(Object(d.a)({},K,Object(u.a)({},e,t)))},_=function(){x()},A=Object(n.useState)(),I=Object(i.a)(A,2),L=I[0],z=I[1],B=Object(n.useState)(),M=Object(i.a)(B,2),K=M[0],T=M[1],P=Object(n.useState)(),F=Object(i.a)(P,2),D=F[0],G=F[1],J=function(){z(null),T(),G(),j(null)};return r.a.createElement("div",{className:"cards"},r.a.createElement(f,{id:L,onEdit:K,edit:function(e){var t=w(e);T(t)},add:function(){T({})},view:function(e){var t=w(e);G(t)},del:function(e){a(e),J()},back:J},s),t&&t[0]&&!K&&!D&&r.a.createElement(m,{list:t,itemClass:"capitalized",handleClick:function(e){e._id===L?J():(console.log("item ",e),j(e),z(e._id))},classCondition:function(e){return L&&e._id===L?"highlight":""}}),D&&r.a.createElement("div",{className:"view-card"},p&&p.map((function(e,t){return r.a.createElement("span",{key:t,className:"capitalized mr-bottom-1rem block"},e+" : "+D[e])})),D&&k&&r.a.createElement(v.default,{coords:D.coords})),K&&r.a.createElement("div",{className:"edit-card capitalized"},h&&h[0]&&h.map((function(e,t){return r.a.createElement(b,{key:t,label:e,classInput:E,onEnter:_,placeholder:K[e]||e,defaultValue:K[e],handleBlur:N,handleInput:S})})),C,r.a.createElement("button",{className:"btn btn-save",onClick:x},"save")))}),g=a(12);function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||"string"!==typeof e)throw Error("local storage key must be string");if(!t){var a=JSON.parse(localStorage.getItem(e))||null;return a}localStorage.setItem(e,JSON.stringify(t))}var E,O=!function(e,t){for(var a=t.split("."),n=0;n<a.length;n++){var r=a[n];if(!e||!e.hasOwnProperty(r))return!1;e=e[r]}return!0}(window,"document.location.hostname")||"localhost"!==window.document.location.hostname,j={getCat:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return O?(e=y("categories"),E=e?Object(g.a)(e):[].concat(k)):E||(E=[].concat(k)),t.abrupt("return",C());case 2:case"end":return t.stop()}}))},delCat:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(-1!==(t=E.findIndex((function(t){return t._id===e})))){a.next=3;break}return a.abrupt("return");case 3:E.splice(t,1),C();case 5:case"end":return a.stop()}}))},editOrAdd:function(e){if(!e)return;e._id?function(e){var t=E.findIndex((function(t){return t._id===e._id}));E[t]=e}(e):function(e){var t=h();e._id=t,E.push(e)}(e);C()}},k=[{_id:"0ewad0",name:"Travel"},{_id:"1djaW1",name:"Snowboard"},{_id:"2fAcp2",name:"Kitesurf"},{_id:"3dl0P3",name:"Hiking"},{_id:"4ljfq4",name:"Luxury"},{_id:"5dape5",name:"Trending"},{_id:"6gXpf6",name:"Most Popular"}];function C(){var e=E.map((function(e){return e}));return O&&y("categories",e),e}function w(e){var t=e.onCategoryChange,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],s=c[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,l.a.awrap(j.getCat());case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return",o);case 6:case"end":return e.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{cards:o,deleteCard:function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(j.delCat(e));case 2:t(),u();case 4:case"end":return a.stop()}}))},editOrAddCards:function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(j.editOrAdd(e));case 2:t(),u();case 4:case"end":return a.stop()}}))},title:"Categories"}))}var x,S={getLoc:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return O?(e=y("locations"),x=e&&e[0]?Object(g.a)(e):N):x||(x=[].concat(N)),t.abrupt("return",_(x));case 2:case"end":return t.stop()}}))},delLoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(-1!==(t=x.findIndex((function(t){return t._id===e})))){a.next=3;break}return a.abrupt("return");case 3:x.splice(t,1),_();case 5:case"end":return a.stop()}}))},editOrAdd:function(e){if(!e)return;e._id?function(e){var t=x.findIndex((function(t){return t._id===e._id}));x[t]=e}(e):function(e){var t=h();e._id=t,x.push(e)}(e);_(x)},sortBy:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=typeof x[0][e]||typeof N[0][e];"string"===a?t?x.sort((function(t,a){return t[e].localeCompare(a[e])})):x.sort((function(t,a){return a[e].localeCompare(t[e])})):x.sort();return _(x)},filterBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"category";if(!e)return;if("all"===e)return _();var a=x.filter((function(a){return a[t]===e}));return a}},N=[{_id:"0ewad0",address:"address",name:"Brazil",coords:[43.4416815,-20.4285582],category:"Travel"},{_id:"1djaW1",address:"address",name:"Austria",coords:[-33.4416815,-20.4285582],category:"Snowboard"},{_id:"2fAcp2",address:"address",name:"Portugal",coords:[11.4416815,31.4285582],category:"Kitesurf"},{_id:"3dl0P3",address:"address",name:"Greece",coords:[22.4416815,32.4285582],category:"Most Popular"},{_id:"4ljfq4",address:"address",name:"Israel",coords:[-32.4416815,31.4285582],category:"Most Popular"},{_id:"5XjNq5",address:"address",name:"Dubai",coords:[-3.4416815,31.4285582],category:"Luxury"},{_id:"6dape6",address:"address",name:"Spain",coords:[-.2416815,54.5285582],category:"Trending"},{_id:"723de7",address:"address",name:"China",coords:[-.24234815,51.5283212],category:"Hiking"},{_id:"8Y3de8",address:"address",name:"Timbaktu",coords:[-.2416815,51.5285582],category:"Hiking"},{_id:"9gXpf9",address:"address",name:"France",coords:[-.2416815,51.5285582],category:"Most Popular"}];function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;e&&(x=e),O&&y("locations",e);var t=e.map((function(e){return e}));return t}function A(e){var t=e.title,a=void 0===t?"select":t,n=e.isShowAllOption,c=void 0===n||n,o=e.dataList,i=e.onSelect,s=void 0===i?function(e){console.log("select",e.target.value)}:i,l=e.valueKey,u=e.showKey,d=void 0===u?l:u,f=e.selectedOption,m=void 0===f?"":f,b=e.idKey,v=void 0===b?"":b,p=e.idKeyExp,g=void 0===p?"":p,h=e.optionClass,y=void 0===h?"capitalized":h,E=e.getSelectList,O=void 0===E?function(){}:E,j=function(e,t){return v?e[v]:g?g(e,t):t};return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:""}," ",a," "),r.a.createElement("select",{className:"btn",onClick:O,onChange:s,value:m},c&&r.a.createElement("option",{value:"all"}," all"),o&&o[0]&&o.map((function(e,t){return r.a.createElement("option",{className:y,key:j(e,t),value:e[l]},e[d])}))))}var I=r.a.lazy((function(){return Promise.resolve().then(a.bind(null,19))})),L=["name","address","category"],z=["name","address"];function B(e){var t=e.isCategorryChanged,a=Object(n.useState)([{_id:0,name:"loading..."}]),c=Object(i.a)(a,2),o=c[0],s=c[1],u=Object(n.useState)([]),f=Object(i.a)(u,2),m=f[0],b=f[1],v=Object(n.useState)(!0),g=Object(i.a)(v,2),h=g[0],y=g[1],E=Object(n.useState)("all"),O=Object(i.a)(E,2),k=O[0],C=O[1],w=Object(n.useState)(!1),x=Object(i.a)(w,2),N=x[0],_=x[1],B=Object(n.useState)(),M=Object(i.a)(B,2),K=M[0],T=M[1],P=Object(n.useState)(),F=Object(i.a)(P,2),D=F[0],G=F[1],J=Object(n.useState)(),W=Object(i.a)(J,2),X=W[0],H=W[1];Object(n.useEffect)((function(){Y()}),[]),Object(n.useEffect)((function(){q()}),[t]);var Y=function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b,e.next=3,l.a.awrap(S.getLoc());case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return",m);case 6:case"end":return e.stop()}}))},q=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(j.getCat());case 2:e=t.sent,s(e);case 4:case"end":return t.stop()}}))},R=function(e){var t=e.latitude,a=e.longitude;G([a,t])};return r.a.createElement("div",{className:"locations-page"},N&&r.a.createElement("div",null),!N&&r.a.createElement("div",{className:"sidebar"},o&&o[0]&&r.a.createElement("div",null,"filter",r.a.createElement(A,{title:"",dataList:o,onSelect:function(e){var t=e.target.value;C(t);var a=S.filterBy(t,"category");b(a)},selectedOption:k,valueKey:"name",showKey:"name",optionClass:"capitalized",getSelectList:q})),r.a.createElement("button",{className:"btn",onClick:function(){S.sortBy("name",h),y(!h),Y()}},"sort ",h?"  a - z":"  z - a"),r.a.createElement("button",{className:"btn",onClick:function(){S.sortBy("category"),Y()}},"group by category")),r.a.createElement(p,{title:"Locations",cards:m,deleteCard:function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(S.delLoc(e));case 2:Y();case 3:case"end":return t.stop()}}))},editOrAddCards:function(e){var t,a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(N){r.next=2;break}return r.abrupt("return");case 2:return t=D||e.coords,a=X||e.address,n=Object(d.a)({},e,{address:a,coords:t,category:K}),console.log("edited ! "),r.next=8,l.a.awrap(S.editOrAdd(n));case 8:_(),Y();case 10:case"end":return r.stop()}}))},inputs:L,editInputs:z,classInput:"mr-bottom-1rem",doOnSelect:function(e){var t=!(!e||!e._id);_(t),t&&(e.category&&T(e.category),e.coords&&R(e.coords))},showMap:!0},r.a.createElement(A,{title:"category",isShowAllOption:!1,selectedOption:K,dataList:o,onSelect:function(e){var t=e.target.value;T(t)},valueKey:"name",showKey:"name",optionClass:"capitalized",getSelectList:q}),N&&r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(I,{coords:D,isEditable:!0,editCoords:R,editAddressByGeocoder:function(e){var t=e.text,a=e.place_name;H(t||a)}}))))}function M(e){var t=e.handleClick,a=e.children;return r.a.createElement("div",{className:"toggle-bar"},r.a.createElement("button",{className:"btn",onClick:function(){return t(!0)}}," ",a[0]," "),r.a.createElement("button",{className:"btn",onClick:function(){return t(!1)}}," ",a[1]," "))}a(35);var K=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),l=s[0],u=s[1];return r.a.createElement("div",{className:"App"},r.a.createElement("header",null),r.a.createElement("main",null,a&&r.a.createElement(w,{onCategoryChange:function(){u([Math.random()])}}),!a&&r.a.createElement(B,{isCategorryChanged:l})),r.a.createElement("footer",null,r.a.createElement(M,{handleClick:function(e){a!==e&&c(!a)}},["Categories","Locations"])))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.0b0ba4eb.chunk.js.map